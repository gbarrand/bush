<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>&lt;h1&gt;Usage&lt;/h1&gt;</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.8.13 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title"><h1>Usage</h1>
</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>On the source code of a softinex app, there is the "mgr" (for manager) directory to build with bush scripts.</p>
<p>In general there is a main "build" script that triggers the build. Binaries are put under the mgr/bin_[config] directory (for exa bin_gnu on a Linux), and for an app the result of the build is in general a : </p><pre class="fragment">    bin_&lt;config&gt;/distrib/&lt;app&gt;-&lt;version&gt;-&lt;platform&gt;.zip
</pre><p> containing a binary distribution.</p>
<p>By default, the build is silent. If all is ok, bush scripts say nothing, but you can have a coarse graining traceback with : </p><pre class="fragment">    ./build -v
 or a full verbose one with :
    ./build -x
</pre><p> The "-v" shows the files that are compiled, lib that are created, and app executable which are linked.</p>
<h1><a class="anchor" id="bush_usage_tweak"></a>
Tweak things</h1>
<p>In general in softinex we arrange to minimize the number of "externals", but as they aer hard to avoid we have some logic to deal with them. The "access" to an external (mainly the -I to find the includes, and the -L to find the lib), is put in a "use" file which is under bush/use. For example use/X11 to compile and link a X11 application, etc... </p><pre class="fragment">    bush/use/&lt;package&gt;
 for example :
    bush/use/X11, bush/use/GL
    bush/use/geant4
</pre><p> If having a problem to access a package, it is here that you have to look and tweak things. As some "externals" are coming from our distrib (then put under ourex/package in a softinex source distribution), you may fall in their "use" file to some logic "use_sys_package" or "use_our_package" to choose between the ourex one or the one of the system. In bush we give priority to an "ourex" source. ("ourex" is for "our distribution of an external").</p>
<p>A critical point are the compiler and link commands. If having problem with them, the places to look are the two files : </p><pre class="fragment">    bush/use_cpp  # for C++
    bush/use_cc   # for C
  ( bush/use_f77  # for what? FORTRAN. Yes there is still some legacy around. )
</pre><p>A couple of things tied to the system, as the shared lib or plugin extension are put in : </p><pre class="fragment">    bush/use_sys
</pre><h1><a class="anchor" id="bush_usage_app"></a>
An app bush build file</h1>
<p>For example, the pmx/mgr/build file looks like : </p><pre class="fragment">#!/bin/sh -f

bush_home=../../bush            # where to find bush files.

. ${bush_home}/args             # put args concerning bush in a build_args variable.
. ${bush_home}/app_header_use   # analyse the build_args, decide the compiler, the name of the bin directory, etc...

#//////////////////////////////////////////////////////
#//////////////////////////////////////////////////////
#//////////////////////////////////////////////////////
if [ ${build_visual} = "yes" ] ; then
  cppflags="${cppflags} -bigobj" # some extra local flags. Here one for VisualC++.
fi

#//////////////////////////////////////////////////////
#// the used external packages : //////////////////////
#//////////////////////////////////////////////////////

use_csz=yes

. ${bush_home}/use/csz

. ${bush_home}/app_trailer_use   # it calls a set of common  ". ${bush_home}/use/&lt;package&gt;" for graphics.

#//////////////////////////////////////////////////////
#//////////////////////////////////////////////////////
#//////////////////////////////////////////////////////

. ${bush_home}/app_trailer      # the place where C and C++ files are found, compiled and where the app exe is linked.
                                # It calls also ". ${bush_home}/app_distrib" to build the final :
                                #    mgr/bin_&lt;config&gt;/distrib/&lt;distrib zip file&gt;
</pre> </div></div><!-- contents -->

</body>
</html>
